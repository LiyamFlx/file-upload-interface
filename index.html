<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InsightWave Engagement Analysis</title>
    <style>
        /* Reset and Basic Styles */
        body, h2, p, button {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #121212;
            color: #f0f0f0;
        }

        #app {
            width: 400px;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            background-color: #1f1f1f;
            text-align: center;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        h2 {
            font-size: 1.8em;
            color: #ffcc00;
            margin-bottom: 15px;
        }

        p {
            margin: 10px 0 20px 0;
            font-size: 1em;
        }

        input[type="file"] {
            margin: 20px auto;
        }

        .progress-bar {
            height: 10px;
            width: 100%;
            background-color: #333;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            width: 0%;
            background-color: #ffcc00;
            transition: width 0.3s;
        }

        #chartContainer {
            width: 100%;
            height: 300px;
            margin-top: 20px;
        }

        button {
            padding: 10px 15px;
            font-size: 1em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #444;
        }

        .primary-button {
            background-color: #ffcc00;
            color: #1f1f1f;
        }

        .secondary-button {
            background-color: #333;
            color: #f0f0f0;
        }

        .download-buttons {
            display: flex;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Start Screen -->
        <div class="screen active" id="startScreen">
            <h2>Welcome to InsightWave</h2>
            <p>Analyze your audio content and gain AI-driven insights into engagement levels and sentiment.</p>
            <button class="primary-button" onclick="showScreen('uploadScreen')">Start Analysis</button>
        </div>

        <!-- Upload Screen -->
        <div class="screen" id="uploadScreen">
            <h2>Upload Your Audio File</h2>
            <input type="file" id="fileInput" accept=".mp3,.mp4,.wav">
            <button class="secondary-button" onclick="showScreen('startScreen')">Back</button>
            <button class="primary-button" onclick="showScreen('analysisScreen')">Calculate Engagement</button>
        </div>

        <!-- Analysis Screen -->
        <div class="screen" id="analysisScreen">
            <h2>Real-Time Analysis</h2>
            <p>Analyzing volume, pitch, sentiment, and more...</p>
            <div class="progress-bar"><div class="progress" id="progressBar"></div></div>
            <div id="chartContainer">
                <canvas id="engagementChart"></canvas>
            </div>
            <div class="buttons">
                <button class="secondary-button" onclick="showScreen('uploadScreen')">Back</button>
                <button class="primary-button" onclick="showScreen('resultsScreen')">View Results</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div class="screen" id="resultsScreen">
            <h2>Analysis Results</h2>
            <p>Here are your detailed insights:</p>
            <div id="chartContainer">
                <canvas id="resultsChart"></canvas>
            </div>
            <div class="download-buttons">
                <button class="primary-button" onclick="downloadCSV()">Download CSV</button>
                <button class="secondary-button" onclick="downloadPDF()">Download PDF</button>
            </div>
            <button class="secondary-button" onclick="showScreen('startScreen')">Start New Analysis</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Navigation and Progress
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => screen.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            if (screenId === 'analysisScreen') runAnalysis();
        }

        // Simulate Analysis with Progress and Chart Updates
        function runAnalysis() {
            const progressBar = document.getElementById('progressBar');
            let progress = 0;

            const updateProgress = setInterval(() => {
                progress += 10;
                progressBar.style.width = progress + '%';
                if (progress >= 100) clearInterval(updateProgress);
                updateChart(engagementChart);
            }, 500);
        }

        // Initialize Charts
        const ctx = document.getElementById('engagementChart').getContext('2d');
        const engagementChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: Array.from({ length: 10 }, (_, i) => i + 1),
                datasets: [{
                    label: 'Engagement Score',
                    data: Array.from({ length: 10 }, () => Math.floor(Math.random() * 10)),
                    borderColor: '#ffcc00',
                    fill: false,
                    pointRadius: 5,
                    pointHoverRadius: 7
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return 'Score: ' + context.raw;
                            }
                        }
                    }
                },
                scales: {
                    y: { beginAtZero: true, max: 10 }
                }
            }
        });

        // Update Chart Function for Real-Time Analysis Simulation
        function updateChart(chart) {
            chart.data.datasets[0].data.push(Math.floor(Math.random() * 10));
            chart.data.labels.push(chart.data.labels.length + 1);
            chart.update();
        }

        // Download CSV Function
        function downloadCSV() {
            const csvData = 'data:text/csv;charset=utf-8,' + engagementChart.data.labels.map((label, index) => `${label},${engagementChart.data.datasets[0].data[index]}`).join('\n');
            const encodedUri = encodeURI(csvData);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'engagement_report.csv');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Download PDF Function
        function downloadPDF() {
            // Placeholder function for PDF download
            alert('PDF download coming soon!');
        }
    </script>
</body>
</html>
